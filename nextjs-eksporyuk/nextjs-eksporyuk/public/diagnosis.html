<!DOCTYPE html>
<html>
<head>
    <title>Production Diagnosis</title>
    <script>
        async function runDiagnosis() {
            const results = document.getElementById('results');
            results.innerHTML = 'Starting diagnosis...\n';
            
            const tests = [
                { name: 'Test API Memberships', url: '/api/memberships' },
                { name: 'Test Auth Providers', url: '/api/auth/providers' },
                { name: 'Test Database Health', url: '/api/health' },
                { name: 'Test Admin Dashboard', url: '/api/admin/dashboard/stats' },
                { name: 'Test Static Assets', url: '/_next/static/chunks/main.js' },
                { name: 'Test Uploads Folder', url: '/uploads/image/1765236221227-EY_Margin.png' }
            ];
            
            for (const test of tests) {
                try {
                    results.innerHTML += `\nTesting ${test.name}...`;
                    const response = await fetch(test.url);
                    const contentType = response.headers.get('content-type');
                    
                    if (response.ok) {
                        results.innerHTML += ` ✅ ${response.status} - ${contentType}`;
                    } else {
                        results.innerHTML += ` ❌ ${response.status} - ${response.statusText}`;
                    }
                } catch (error) {
                    results.innerHTML += ` ❌ ERROR: ${error.message}`;
                }
            }
            
            results.innerHTML += '\n\n=== Environment Check ===';
            results.innerHTML += '\nUser Agent: ' + navigator.userAgent;
            results.innerHTML += '\nLocation: ' + window.location.href;
            results.innerHTML += '\nCookies: ' + document.cookie;
        }
        
        window.onload = runDiagnosis;
    </script>
</head>
<body>
    <h1>Production Diagnosis Tool</h1>
    <pre id="results">Loading...</pre>
</body>
</html>